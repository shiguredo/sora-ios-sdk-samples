# ScreenCastSample (スクリーンキャストサンプル)

このサンプルでは、クライアントアプリの画面を動画配信するアプリを、 Sora iOS SDK を用いて実装する方法を説明しています。
ゲームなどの動画実況配信を行ったり、アプリの使い方を説明する配信を行ったりする事ができます。

## ビルド環境

サンプルアプリをビルドするには以下の環境が必要です。

- iOS 13.0 以降がインストールされたデバイス (iPhone / iPad どちらにも対応しています)
  - このサンプルアプリはシミュレータでは動作が保証されません。
- Xcode 13.4.1 以降
  - 本サンプルアプリでは Swift 5.6.1 を使用しています。
- CocoaPods 1.11.2 以降

## ビルド方法

1. CocoaPods でライブラリを取得します。

   ```
   $ pod install
   ```

2. ``ScreenCastSample/Environment.example.swift`` のファイル名を ``ScreenCastSample/Environment.swift`` に変更し、接続情報を設定します。

   ```
   $ cp ScreenCastSample/Environment.example.swift ScreenCastSample/Environment.swift
   ```

３. ``ScreenCastSample.xcworkspace`` を Xcode で開いてビルドします。

## サンプルアプリの使い方

アプリを起動するとサンプルのゲームが起動します。
このゲームは画面をタッチすると物理演算された箱が次々と現れて積み上がっていくゲームになっています。

アプリを起動してから、右上のカメラアイコンをタッチすると、現在のアプリの画面を配信することができます。

このサンプルアプリは配信専用となっています。
このサンプルアプリで配信している動画を閲覧するには、
別途 RealTimeStreamingSample (生放送配信サンプルアプリ) などの視聴環境が必要です。

このサンプルアプリでは、同時に複数のクライアントが同じクライアントIDに接続して配信を行う事はできません。
最初に接続した配信者が優先され、後から同じクライアントIDに接続した配信者はエラーになります。
視聴者側には特に制限がなく、無制限に配信を見る事ができます。

現在、サンプルアプリで使用している ReplayKit の実装都合上、
H.264 形式のビデオフォーマットを使用すると配信が途中で止まる不具合があります。
申し訳ありませんが、 ReplayKit と同時に使用する場合は、 VP9 などの他のビデオフォーマットでご利用ください。

## 実装上の詳細について

実装上の詳細につきましてはサンプルアプリのソースコード上に詳細なコメントを用意してありますので、適時そちらをご確認ください。
